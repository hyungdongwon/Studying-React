## 📋 오늘 학습 내용 
- array, object state 변경하는 법


```
let [글제목, 글제목변경] = useState( ['남자코트 추천', '강남 우동맛집', '파이썬 독학'] );  
  
  return (
    <button onClick={ ()=>{ 
      let copy = 글제목;
      copy[0] = '여자코트 추천';
      글제목변경(copy)
    } }> 수정버튼 </button>
  )
```

array, object 자료 다룰 때는 원본 데이터를 직접 조작하는 것 보다는

기존값은 보존해주는 식으로 코드짜는게 좋은관습입니다. 

(왜냐면 원본 막 바꿔버렸을 때 갑자기 원본이 필요해지면 어쩔 것임)

그래서 let copy 같은 변수에다가 기존 array를 복사해놓고 

그걸 조작하는 식으로 코드짜면 조금 더 안전합니다. 

수정버튼 눌러도 바뀌지않는다 왤까?

```
 let [글제목, 글제목변경] = useState( ['남자코트 추천', '강남 우동맛집', '파이썬 독학'] );  
  
  return (
    <button onClick={ ()=>{ 
      let copy = [...글제목];
      copy[0] = '여자코트 추천';
      글제목변경(copy)
    } }> 수정버튼 </button>
  )
```
이러면 제대로 동작합니다.

### state 변경함수 동작원리 

state 변경함수를 쓸 때

기존state === 신규state 이렇게 먼저 검사해봅니다.

그래서 같으면 state 변경을 해주지 않습니다. 

그래서 위 코드에서도 글제목변경(copy) 해도

copy라는 변수가 기존state와 같아서 변경을 안해준 것입니다. 

### array/object 동작원리 

![image](https://github.com/user-attachments/assets/86f010bb-7cf1-4802-b9ac-261303ff3bb2)

1. 자바스크립트는 array/object 자료를 하나 만들면

예를 들어서 let arr = [1,2,3] 이렇게 만들면 

[1,2,3] 자료는 램이라는 가상공간에 몰래 저장이 되고

let arr 변수엔 그 자료가 어디있는지 가리키는 화살표만 담겨있습니다.

---

2. 그래서 array/object 자료를 복사하면 이상한 일이 일어나는데

```
let data1 = [1,2,3];
let data2 = data1;   //복사문법임 
```
이런 식으로 사용하면 복사가 됩니다.

data1에 있던 자료를 data2에 복사한다는 뜻임 

그럼 data2 출력해보면 [1,2,3] 이게 잘 나옵니다. 

근데 data1과 data2는 각각 [1,2,3]을 별개로 저장하는게 아니라

data1과 data2는 똑같은 값을 공유합니다.

data1을 변경하면 data2도 자동으로 변경되고 그렇습니다. (충격)

왜냐면 변수에는 화살표만 저장된다니까요

그래서 방금 님들 화살표를 복사한 것임 

그래서 data1, data2는 똑같은 화살표를 가지게 됩니다. 같은 자료를 가리킴 

---

3. 그래서 같은 화살표를 가지고 있는 변수끼리는 

등호로 비교해도 똑같다고 나옵니다. 

```
let data1 = [1,2,3];
let data2 = data1;  //복사
data2[0] = 1000;  //data2 내부 변경
console.log(data2 === data1)   //true 나올듯 
```
```
let copy = 글제목;
copy[0] = '여자코트 추천';
글제목변경(copy)
```
그래서 아까처럼 이렇게하면

컴퓨터는 copy와 기존 글제목 state는 똑같다고 생각하기 때문에 (화살표가 똑같아서)

state 변경을 안해줍니다. 

```
let copy = [...글제목];
copy[0] = '여자코트 추천';
글제목변경(copy)
```
이러면 잘됩니다. 화살표가 달라지는 문법이라 그렇습니다. 

***점3개는 뭐냐?

spread operator 라고하는 문법인데

array나 object 자료형 왼쪽에 붙일 수 있으며

뜻은 별거없고 괄호를 벗겨주세요~ 라는 뜻입니다. 

...[1,2,3] 이렇게 쓰면

그 자리에 1,2,3 이 남습니다. 걍 괄호 벗기기용 연산자입니다.

근데 두번째 용도도 있는데 array나 object 자료형을 복사할 때 많이 사용합니다. 
---

오늘의 정리 

리액트에서 array/object state를 수정하고 싶으면 

독립적인 카피본을 만들어서 수정하는게 좋습니다. 

[...기존state] 

{...기존state} 

이렇게 하면 독립적인 카피가 하나 생성됩니다.

